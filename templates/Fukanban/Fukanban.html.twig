{% extends 'base.html.twig' %}
{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('assets/css/style.css') }}" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

{% endblock %}

{% block javascripts %}
<script src="https://kit.fontawesome.com/d31ad0e262.js" crossorigin="anonymous"></script>
{% endblock %}


{% block body %}

    <label id="labelproject" > projet :</label>
    <select name="projects" id="projects">
        <option value="default">{%  if (idprojet) %} {{ idprojet }} {% else %}SÃ©lectionnez un projet {% endif %}</option>
        {% for projet in projets %}
        <option value="{{ projet.getId() }}">{{ projet.getName()}}</option>
        {% endfor %}
    </select>

    <script>
        document.getElementById('projects').addEventListener('change', function() {
            var id = this.value;
            window.location.href = '/home/'+id;
        });
    </script>









    <section class="wrapper">


        <ul class="column__list">

    {% for statut in statuts %}
        <div id="container_add">
            <div class="column__item">
                <div class="column__title--wrapper">

                    <h2>{{ statut.getLibelle() }}</h2>
                    <i class="fas fa-ellipsis-h"></i>
                </div>
                <ul class="card__list">

                    {% for task in tasks %}
                        {% if task.getStatut().getLibelle() == statut.getLibelle()  %}
                    <div class="card__item">

                        <span class="card__tag card__tag--browser">{{ task.getTitle() }}</span>
                        {% for users in task.getUser() %}
                        <span class="card__tag card__tag--browser">{{ users.getName() }}</span>
                        {% endfor %}
                        <span class="card__tag card__tag--browser">{{ task.getProject().getName() }}</span>


                        <h6 class="card__title">{{ task.getDescription() }}</h6>
                        <div id="actions_tasks">
                            <form method="post" action="{{ path('app_tasks_delete', {'id': task.getId()}) }}">
                                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ task.getId()) }}">
                                <button type="submit" ><i class="fa-solid fa-trash"></i></button>
                            </form>

                            <form method="post" action="{{ path('app_tasks_edit', {'id': task.getId()}) }}">
                                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ task.getId()) }}">
                                <button type="submit" ><i class="fa-solid fa-pen-to-square"></i></button>
                            </form>
                        </div>



                    </div>
                        {% endif %}
                    {% endfor %}

                </ul>

            </div>
        <div class="column__item--cta">
            <i class="fas fa-plus"></i>
            <h4>Add another card</h4>
        </div>
        </div>
    {% endfor %}


        </ul>
    </section>


{% endblock %}